import{_ as S}from"./Dz9CXFig.js";import{d as k,x as w,N as $,s as n,A as b,c as R,O as B,a as d,e as r,i as C,G as D,P as T,u as a,Q as q,R as A,t as u,w as E,o as c,S as F}from"./E5yYTOSB.js";import{s as G}from"./BUFCIRw7.js";import"./BgfXOMNT.js";import"./NjiJXRmu.js";const K={flex:"","bg-gray:10":"","items-center":"",px6:"",py4:"",gap3:"",sticky:""},M=["placeholder"],N={key:0,p8:"",flex:"","flex-col":"","gap-3":"","items-start":""},V={"text-4xl":"","text-red":""},H={py2:""},L={key:2,"text-4xl":"",p10:"","font-100":"",op50:"","text-center":""},I=k({__name:"search",setup(O){const f=w(),m=$(),o=n((f.query.s||"").toString()),l=n(),i=n(),p=n([]),s=n(o.value);function v(){s.value!==o.value&&(s.value=o.value.toString(),i.value=void 0,p.value=[],m.replace({query:{s:o.value}}))}async function y(t){if(s.value)try{const e=await G(s.value,t);i.value=e.total_results??i.value,p.value.push(...e.results)}catch(e){l.value=e}}const x=F(v,200),_={mounted:t=>t.focus()};return b({title:R(()=>`Search: ${s.value}`)}),B(()=>o.value,()=>x()),(t,e)=>{const g=S;return c(),d("div",null,[r("div",K,[e[2]||(e[2]=r("div",{"i-ph:magnifying-glass":"","text-xl":"",op50:""},null,-1)),D(r("input",{"onUpdate:modelValue":e[0]||(e[0]=h=>A(o)?o.value=h:null),type:"text","text-2xl":"","bg-transparent":"","outline-none":"","w-full":"",placeholder:t.$t("Type to search..."),onKeyup:q(v,["enter"])},null,40,M),[[T,a(o)],[_]])]),a(l)?(c(),d("div",N,[r("h1",V,u(t.$t("Error occurred on fetching")),1),r("pre",H,u(a(l)),1),r("button",{"n-link":"",border:"",px4:"",py1:"",rounded:"",onClick:e[1]||(e[1]=h=>l.value=void 0)},u(t.$t("Retry")),1)])):a(s)?(c(),C(g,{key:a(s),fetch:y,items:a(p),count:a(i),blocking:!1,type:"movie"},{default:E(()=>[r("div",null,u(t.$t("Search result for: {currentSearch}",{currentSearch:a(s)})),1)]),_:1},8,["items","count"])):(c(),d("div",L,u(t.$t("Type something to search...")),1))])}}});export{I as default};
