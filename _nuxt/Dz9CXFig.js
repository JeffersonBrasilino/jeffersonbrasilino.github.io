import{a as v}from"./BgfXOMNT.js";import{_ as h}from"./NjiJXRmu.js";import{d as k,s as m,y as w,U as x,a as s,e as u,f as _,b as B,J as C,t as b,w as N,u as E,F,r as L,o as a,i as V}from"./E5yYTOSB.js";const $={flex:"~",px8:"",pt8:"",gap2:"","text-3xl":""},A={key:0,px8:"",op50:""},G={key:1,p10:"","animate-pulse":""},H=k({__name:"AutoLoadGrid",props:{items:{},type:{},fetch:{},count:{},blocking:{type:Boolean,default:!0}},async setup(y){let c,d;const t=y,l=m();let p=0;const n=m(!1);async function i(){if(!n.value){n.value=!0;try{p+=1,await t.fetch(p)}finally{n.value=!1}}}return t.blocking?([c,d]=w(()=>i()),await c,d()):i(),x(()=>{var o;if(!l.value||n.value||t.count!=null&&((o=t.items)==null?void 0:o.length)>=t.count)return;const{top:e}=l.value.getBoundingClientRect();e-window.innerHeight<400&&i()},500),(e,r)=>{const o=v,g=h;return a(),s("div",null,[u("h1",$,[C(e.$slots,"default")]),e.count!=null?(a(),s("div",A,b(e.$t("{count} items",{count:e.count})),1)):_("",!0),B(g,null,{default:N(()=>[(a(!0),s(F,null,L(e.items,f=>(a(),V(o,{key:f.id,type:e.type,item:f},null,8,["type","item"]))),128))]),_:1}),u("div",{ref_key:"tailEl",ref:l},null,512),E(n)?(a(),s("div",G,r[0]||(r[0]=[u("div",{"i-carbon:circle-dash":"","text-4xl":"",ma:"","animate-spin":""},null,-1)]))):_("",!0)])}}});export{H as _};
